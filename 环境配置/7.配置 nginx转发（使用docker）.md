请确保事先配置了虚拟机的 /etc/hosts

## 拉取容器 nginx

```shell
docker pull nginx:1.25.0
```
## 创建容器
```shell
docker run \
  -itd \
  --name nginx \
  -v /data/nginx:/etc/nginx/conf.d \
  -v /etc/hosts:/etc/hosts \
  --restart always \
  -p 80:80 \
  nginx:1.25.0
```
注意：使用 -v 映射了虚拟机的hosts文件，不然容器内找不到域名映射。
## 将nginx配置写入持久化卷
```shell
cat << EOF > /data/nginx/default.conf

server {
	listen 80;
	server_name www.demo.com;

	location / {
	}
}

server {
	listen 80;
	server_name git.demo.com;

	location / {
		proxy_pass http://www.demo.com:9000/;
	}
}

server {
	listen 80;
	server_name jenkins.demo.com;

	location / {
		proxy_pass http://www.demo.com:8080/;
	}
}

server {
	listen 80;
	server_name registry.demo.com;
	client_max_body_size 0;

	location / {
		proxy_pass http://www.demo.com:5000/;
	}
}

EOF
```

## 重启nginx容器
docker restart nginx

## 验证
|地址|页面结果|
|:---:|:---:|
|http://www.demo.com/|404页（因为未配置转发）|
|http://git.demo.com/|打开 gitlab 首页|
|http://jenkins.demo.com/|打开 jenkins 首页|
